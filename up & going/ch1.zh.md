
# 你不知道JS: 向上走

# 第1章: 编程

欢迎光临_你不知道JS_(_ydkjs_)系列. 

_起来,去_介绍了编程的几个基本概念ℴℴ当然,我们倾向于JavaScript(通常是缩写JS),以及如何处理和理解本系列中的其他标题. 特别是如果你只是进入编程和/或JavaScript,这本书将简要探讨你需要得到什么_起来,去_. 

这本书从一个非常高的水平开始解释程序设计的基本原理. 它主要是打算如果你开始_ydkjs_很少有以前的编程经验,并正在寻找这些书籍,以帮助您开始通过JavaScript的镜头了解编程的路径. 

第1章应该作为一个快速概述的东西,你想了解更多和实践得到_进入编程_. 还有许多其他奇妙的编程介绍资源,可以帮助您深入挖掘这些主题,我鼓励您从本章学习它们. 

一旦你对一般编程基础感到满意,第2章将有助于引导你熟悉JavaScript编程的味道. 第2章介绍了JavaScript是什么,但又不是一个全面的指南ℴℴ其余的就是这样. _ydkjs_书是供!

如果您已经对JavaScript相当满意了,首先查看第3章,简要了解一下从中期望得到什么. _ydkjs_然后直接跳进去!

## 代码

让我们重新开始吧. 

程序,常被称为_源代码_或者只是_代码_是一组特殊指令,告诉计算机执行什么任务. 通常代码保存在文本文件中,尽管使用JavaScript,您也可以在浏览器中直接将代码键入到开发人员控制台中,我们将在不久的将来对此进行讨论. 

有效格式和指令组合的规则称为_计算机语言_,有时被称为_语法_就像英语告诉你如何拼写单词和如何用单词和标点符号来创造有效的句子一样. 

### 声明

在计算机语言中,执行特定任务的一组单词ㄡ数字和运算符是_陈述_. 在JavaScript中,语句可能如下所示: 

```js
a = b * 2;
```

人物`一`和`B`被称为_变量_(见"变量"),就像简单的盒子一样,你可以把你的东西储存起来. 在程序中,变量保存值(如数字). `四十二`)由程序使用. 把他们作为自己的价值符号占位符. 

相比之下,`二`只是一个值本身,称为_文学价值_,因为它独立存储在变量中. 

这个`=`和`*`字符_运营商_(见"运算符")ℴℴ它们执行赋值和数学乘法等值和变量的操作. 

JavaScript中的大多数语句以分号结束(`;`)结束时. 

声明`a = b * 2;`粗略地告诉计算机,以获取存储在变量中的当前值. `B`乘以这个值`二`然后将结果存储到另一个变量中,我们称之为`一`. 

程序只是许多这样的语句的集合,它们共同描述执行程序目的所需的所有步骤. 

### 表达

语句由一个或多个组成. _表达_. 表达式是对变量或值的引用,或与运算符相结合的一组变量和值. 

例如:

```js
a = b * 2;
```

这句话有四个表达方式: 

-   `二`是一个_文学价值的表达_
-   `B`是一个_变量表达式_,即检索其当前值. 
-   `B * 2`是一个_算术表达式_,这意味着做乘法运算. 
-   `a = b * 2`是一个_赋值表达式_,这意味着分配结果`B * 2`变量表达式`一`(更多关于以后的作业)

单独表达的一般表达式也称为_表达式语句_如以下: 

```js
b * 2;
```

这种表达语句的味道不是很常见或有用,因为一般来说它不会对程序运行产生任何影响ℴℴ它会检索到`B`把它乘以`二`但不会对结果有任何影响. 

更常见的表达式语句是_调用表达式_语句(参见"函数"),因为整个语句是函数调用表达式本身: 

```js
alert( a );
```

### 执行一个程序

这些编程语句集合是如何告诉计算机该怎么做的?该计划需要_执行_,也被称为_运行程序_. 

这样的陈述`a = b * 2`有助于开发人员在阅读和写作时,但实际上并不是以计算机可以直接理解的形式. 所以在计算机上有一个特殊的实用程序_口译译员_或_编译器_用于将您编写的代码转换为计算机可以理解的命令. 

对于一些计算机语言,这种翻译的命令通常是从上到下,一行行,每一次的进步_口译_代码. 

对于其他语言,翻译是提前完成的,称为_编译_代码,所以当程序_跑_稍后,运行的实际上是已经编译好的计算机指令. 

它通常断言JavaScript是_解释_,因为每次运行JavaScript源代码时都会进行处理. 但这并不完全准确. 实际上是JavaScript引擎_编译_程序随即运行,然后立即运行编译后的代码. 

**注: **有关JavaScript编译的更多信息,请参见_范围和关闭_本系列的标题. 

## 自己尝试一下

本章将用简单的代码片段来介绍每一个编程概念,所有的代码都是用JavaScript编写的(很明显!). 

这是不够强调的: 当你完成本章时,你可能需要花时间去复习几遍--你应该通过自己键入代码来练习每一个概念. 做到这一点最简单的方法是在最近的浏览器中打开开发工具控制台(FirefoxㄡChromeㄡIE等). 

**提示: **通常,您可以通过键盘快捷方式或菜单项启动开发人员控制台. 有关在您喜爱的浏览器中启动和使用控制台的详细信息,请参见"掌握开发工具控制台"(<http://blog.teamtreehouse.com/mastering-developer-tools-console>). 若要立即将多行输入控制台,请使用`<移位> > <输入>`移动到下一个新行. 一旦你打`<回车>`控制台本身将运行您刚才键入的所有内容. 

让我们熟悉控制台中运行代码的过程. 首先,我建议在浏览器中打开一个空选项卡. 我喜欢打字来做这件事. `关于: 空白`进入地址栏. 然后,请确保您的开发控制台是打开的,正如我们刚才提到的那样. 

现在,键入此代码并查看它是如何运行的: 

```js
a = 21;

b = a * 2;

console.log( b );
```

将先前的代码输入到控制台中的Chrome中应该产生如下特性: 

<img src="fig1.png" width="500">

去吧,试试看. 学习编程的最好方法是开始编码!

### 输出

在前面的代码片段中,我们使用`控制台(ⅆ)`. 简单地说,让我们看看代码行是关于什么的. 

你可能猜到了,但这正是我们打印文本的方式. _输出_在开发控制台中向用户. 那句话有两个特点,我们应该解释一下. 

首先,该`日志(b)`部分称为函数调用(参见"函数"). 正在发生的事情是我们正在处理`B`变量的函数,它要求它的值`B`并将其打印到控制台. 

其次,该`慰问.`部分是一个对象引用,其中`记录(ⅆ)`函数位于. 我们在第2章中更详细地介绍对象及其属性. 

创建输出的另一种方式是运行一个`警报(ⅆ)`声明. 例如:

```js
alert( b );
```

如果你运行它,你会注意到,而不是打印输出到控制台,它显示了一个弹出的"OK"框的内容`B`变量. 然而,使用`控制台(ⅆ)`通常会使学习代码和在控制台中运行程序比使用更容易. `警报(ⅆ)`因为您可以在不中断浏览器接口的情况下输出许多值. 

为了这本书,我们将使用`控制台(ⅆ)`输出. 

### 输入

当我们讨论输出时,您可能会怀疑_输入_(即,接收来自用户的信息). 

最常见的方法是让HTML页面向用户显示表单元素(比如文本框),然后输入JS将这些值读取到程序变量中. 

但是有一个更简单的方法来获得输入,用于简单的学习和演示目的,比如你在本书中所做的事情. 使用`提示(ⅆ)`功能: 

```js
age = prompt( "Please tell me your age:" );

console.log( age );
```

正如你可能猜到的,你传递的信息`提示(ⅆ)`ℴℴ在这种情况下,`"请告诉我你的年龄: "`-打印到弹出窗口中. 

这应该类似于以下: 

<img src="fig2.png" width="500">

一旦您通过单击"OK"提交输入文本,就会观察到输入的值存储在`年龄`变量,我们_输出_具有`控制台(ⅆ)`: 

<img src="fig3.png" width="500">

在学习基本编程概念时,为了保持简单,本书中的示例不需要输入. 但现在你已经知道如何使用`提示(ⅆ)`如果你想挑战你自己,你可以试着在你对例子的探索中使用输入. 

## 运营商

运算符是我们对变量和值执行操作的方法. 我们已经看到了两个JavaScript操作符`=`和`*`. 

这个`*`算子进行数学乘法. 够简单的,对吧?

这个`=`运算符等于_分配_我们首先计算_右手边_(源值)`=`然后将其放入我们指定的变量上_左手边_(目标变量). 

**警告: **这可能是一个奇怪的逆序来指定赋值. 而不是`= 42`有些人可能喜欢翻转顺序,所以源值在左边. `42 - >`(这不是有效的JavaScript!)不幸的是`= 42`有序形式和类似的变体在现代编程语言中非常普遍. 如果感觉不自然,就花点时间在脑海中排练这个习惯. 

考虑: 

```js
a = 2;
b = a + 1;
```

在这里,我们分配`二`价值的`一`变量. 然后,我们得到`一`变量(仍然`二`),加`一`对它产生价值`三`然后将该值存储在`B`变量. 

虽然不是技术上的操作员,但您需要关键字`VaR`在每一个程序中,因为它是你的主要方式_声明_(又名_创造_)_VaR_变量(参见"变量"). 

在使用变量之前,您应该始终按名称声明变量. 但您只需要每次声明一次变量. _范围_(见"范围");它可以在需要之后多次使用. 例如:

```js
var a = 20;

a = a + 1;
a = a * 2;

console.log( a );	// 42
```

下面是JavaScript中一些最常见的操作符: 

-   分配: `=`如在`= 2`. 
-   数学:`+`(此外),`ℴ`(减法),`*`(乘法)和`/`(司),如`* 3`. 
-   复合赋值: `+ =`,`- =`,`* =`,和`/ =`是将数学运算与赋值相结合的复合运算符,如`a=2`(同`a=2`). 
-   增量/减量: `+ +`(递增),`ℴℴ`(减量),如`+ +`(类似于`a=1`). 
-   对象属性访问: `. `如在`log()控制台. `. 

    对象是在特定命名的位置上保存其他值的值,称为属性. `一个目标. `表示一个对象值. `obj`具有名称的属性`一`. 可以交替地访问属性`OBJ ["]`. 见第2章. 

-   平等: `= =`(松等于),`= = =`(严格相等),`!=`(松散不等于),`!= =`(严格不等于),如`a = b`. 

    见"值和类型"和第2章. 

-   比较: `<`(小于),`>`(大于),`< =`(小于或等于等于),`> =`(大于或松相等),如`a = b`. 

    见"值和类型"和第2章. 

-   逻辑: `&`(和),`Ɯ Ɯ`(或),如`一个Ɯ Ɯ B`选择要么`一` _或_ `B`. 

    这些运算符是用来表达复合句(见"条件"),如果不是`一` _或_ `B`是真的. 

**注: **更多的细节,并报道没有提到运营商,看到Mozilla开发者网络(MDN)的表达式和运算符"([https://developer.mozilla.org/en-us/docs/web/javascript/guide/expressions_and_operators](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators)). 

## 值和类型

如果你问一个电话商店的雇员,某个电话的价格是多少,他们说"九十九,九十九"(即99.99美元),他们会给你一个实际的数字美元数字,代表你需要付多少钱(加上税金)去买它. 如果你想买两部手机,你可以很容易地心算,把你的基础成本提高到199.98美元. 

如果同一个雇员拿起另一个类似的电话,但是说它是"免费的"(可能有航空报价),他们不会给你一个号码,而是另一种你期望成本(0美元)的表示ℴℴ"免费"这个词. 

当你后来问手机是否包括充电器时,答案只能是"是"或"不是". 

在非常类似的方式中,当你在程序中表达值时,你根据你打算用它们做的事情来选择这些值的不同表示形式. 

这些值的不同表示称为_类型_在编程术语中. JavaScript为这些调用中的每一个都有内置类型. _原始的_价值观: 

-   当你需要做数学的时候,你想要一个`数`. 
-   当您需要在屏幕上打印一个值时,您需要一个`一串`(一个或多个字符ㄡ单词ㄡ句子). 
-   当你需要在你的程序中做出决定时,你需要一个`布尔`(`真正的`或`假`). 

直接包含在源代码中的值称为_字面量_. `一串`文字被双引号包围. `"ⅆ"`或单引号(`'ⅆ'`ℴℴ唯一的区别是文体偏好. `数`和`布尔`文字只显示为(即),`四十二`,`真正的`等等). 

考虑: 

```js
"I am a string";
'I am also a string';

42;

true;
false;
```

超越`一串`/`数`/`布尔`值类型,编程语言提供的是常见的. _阵列_,_物体_,_功能_等等. 在本章和下一章中,我们将更多地介绍值和类型. 

### 类之间的转换

如果你有`数`但需要在屏幕上打印,需要将值转换为`一串`在JavaScript中,这种转换称为"强制". 类似地,如果某人在电子商务页面上输入一系列数字字符,则为`一串`但是,如果需要使用该值来进行数学运算,则需要_强迫_这一个`数`. 

JavaScript强制胁迫之间提供了几种不同的设施_类型_. 例如:

```js
var a = "42";
var b = Number( a );

console.log( a );	// "42"
console.log( b );	// 42
```

使用`数字(..)`(内置函数)如图所示_明确的_强制从任何其他类型到`数`型. 那应该很简单. 

但一个有争议的话题是,当你试图比较两个不是同一类型的值时,会发生什么,这将需要_隐性的_强制. 

比较字符串时`"99.99"`要数`九十九点九九`大多数人都同意它们是等价的. 但它们不完全一样,是吗?这是两个不同表示中的相同值,两个不同_类型_. 你可以说他们"相当松散",是吗?

为了帮助你摆脱这些常见的情况,JavaScript有时会出现. _隐式_对匹配类型的强制值. 

所以如果你使用`= =`进行比较的松散运算符`"99.99"=99.99`JavaScript将转换左侧. `"99.99"`其`数`相等的`九十九点九九`. 比较就变成`99.99 = 99.99`这当然是`真正的`. 

如果你没有花时间去学习支配其行为的规则的话,隐式强制会造成混乱. 大多数js开发人员从来都没有,所以通常的感觉是隐式强制是混淆和危害程序与意外的错误,因此应避免. 它有时甚至被称为语言设计中的一个缺陷. 

然而,隐式强制是一种机制. _可以学会_,而且_应该学会_任何想认真对待JavaScript编程的人. 学习规则不仅会让你感到困惑,它还能使你的程序更好!努力是值得的. 

**注: **有关胁迫的更多信息,请参阅本章第2章和第4章. _类型与语法_本系列的标题. 

## 代码注释

电话商店的雇员可能会记下一些关于新发布的手机的特性或公司提供的新计划的说明. 这些笔记仅供员工使用,不供客户阅读. 然而,这些笔记帮助员工做她的工作更好的记录的方式及原因,她应该告诉客户. 

关于编写代码,您可以学到的最重要的一课之一是,它不仅仅适用于计算机. 对于开发人员来说,代码对于编译程序来说是一样多的,如果不是更多的话. 

你的电脑只关心机器代码,一系列二进制的0和1,来自_编译_. 有一个几乎无限多的方案,你可以写,产量的0和1的同一系列. 你做的选择,关于如何写程序的事情--不仅给你,但你的其他团队成员甚至给未来的自己. 

你不仅要努力编写正确工作的程序,而且要检查那些有意义的程序. 通过选择变量的好名字(见"变量")和函数(参见"函数"),您可以在这项工作中走得很远. 

但另一个重要部分是代码注释. 这些都是你的程序中插入的文本,纯粹是为了向人类解释事物. 解释器/编译器总是忽略这些注释. 

关于如何注释好代码有很多意见,我们不能真正定义绝对通用规则. 但是一些观察和指导是非常有用的: 

-   没有注释的代码是次优的. 
-   注释太多(例如,每行一行)可能是代码编写不好的标志. 
-   评论应该解释_为什么_,不_什么_. 他们可以随意解释. _怎样_如果那特别令人困惑. 

在JavaScript中,有两种类型的注释: 单行注释和多行注释. 

考虑: 

```js
// This is a single-line comment

/* But this is
       a multiline
             comment.
                      */
```

这个`/ /`如果你要在一条语句上方,甚至在一行的结尾处加上正确的注释,单行注释是合适的. 上线后的一切`/ /`被视为注释(因而被编译器忽略),一直到该行的结尾处. 对单行注释中出现的内容没有限制. 

考虑: 

```js
var a = 42;		// 42 is the meaning of life
```

这个`/ * ..* /`如果你有几条线,在你的评论值得解释多行注释是合适的. 

这是多行注释的一种常见用法: 

```js
/* The following value is used because
   it has been shown that it answers
   every question in the universe. */
var a = 42;
```

它也可以出现在一条线上的任何地方,甚至在一条直线的中间,因为`* /`结束它. 例如:

```js
var a = /* arbitrary value */ 42;

console.log( a );	// 42
```

不能出现在一个多行注释是一个唯一`* /`因为这将被解释为结束评论. 

你一定要开始学习编程,首先要养成注释代码的习惯. 在本章的其余部分中,您将看到我使用注释来解释事情,所以在您自己的实践中也这样做. 相信我,读你代码的人都会感谢你的!

## 变量

大多数有用的程序都需要跟踪一个值,因为它在程序的过程中发生变化,并根据程序的预期任务进行不同的操作. 

在程序中最简单的方法是将一个值赋给一个符号容器,称为_变量_之所以这么称呼是因为这个容器中的值可以_变化_随着时间的推移. 

在一些编程语言中,您声明一个变量(容器)来保存特定类型的值,例如`数`或`一串`. _静态类型_,否则称为_类型强制_通常通过防止意外的值转换而被引用为程序正确性的一个好处. 

其他语言强调VA的类型. _弱类型_,否则称为_动态类型_允许变量随时保存任何类型的值. 它通常被引用为程序灵活性的一个优点,它允许单个变量来表示一个值,不管程序逻辑流中任意时刻的值是什么类型的. 

JavaScript使用后一种方法,_动态类型_意思是变量可以保存任何值. _类型_没有任何_类型_执行.

如前所述,我们使用`VaR`声明-注意没有其他_类型_宣言中的信息. 考虑这个简单的程序: 

```js
var amount = 99.99;

amount = amount * 2;

console.log( amount );		// 199.98

// convert `amount` to a string, and
// add "$" on the beginning
amount = "$" + String( amount );

console.log( amount );		// "$199.98"
```

这个`数量`变量开始保持数字`九十九点九九`然后持有`数`结果`金额×2`,这是`一百九十九点九八`. 

第一`控制台(ⅆ)`命令有_隐式_要挟,`数`价值一`一串`把它打印出来. 

然后声明`金额="$"+字符串(数量)` _明确地_强迫的`一百九十九点九八`价值一`一串`并增加了一个`"$"`开始的性格. 此时,`数量`现在拥有的`一串`价值`"199.98美元"`所以第二个`控制台(ⅆ)`语句不需要强制打印出来. 

JavaScript开发人员将注意到使用`数量`每个变量`九十九点九九`,`一百九十九点九八`,和`"199.98美元"`价值观. 静态类型爱好者更喜欢单独的变量,比如`amountstr`举行决赛`"199.98美元"`值的表示,因为它是不同的类型. 

无论哪种方式,你都会注意到`数量`持有在程序的过程中改变的运行值,说明变量的主要用途: 管理程序_状态_. 

换言之,_状态_正在跟踪程序运行时对值的更改. 

变量的另一个常用用法是集中值设置. 这更为典型地称为_常数_当您声明具有值的变量并将其用于_不改变_贯穿整个程序. 

你说这些_常数_通常是在程序的顶部,所以如果你需要的话,你有一个地方可以方便地改变一个值. 按照惯例,JavaScript变量作为常量通常是大写的,带有下划线. `_`多词之间. 

下面是一个愚蠢的例子: 

```js
var TAX_RATE = 0.08;	// 8% sales tax

var amount = 99.99;

amount = amount * 2;

amount = amount + (amount * TAX_RATE);

console.log( amount );				// 215.9784
console.log( amount.toFixed( 2 ) );	// "215.98"
```

**注: **类似于`控制台(ⅆ)`是一个功能`记录(ⅆ)`作为对象属性访问`慰问`价值,`固定(..)`下面是一个可以访问的函数`数`价值观. JavaScript`数`S不会自动格式化为美元ℴℴ引擎不知道您的意图是什么,也没有货币类型. `固定(..)`让我们指定多少小数点,我们想要的`数`圆形到,并产生`一串`是必要的. 

这个`tax_rate`变量是唯一的_常数_按照惯例,这个程序没有什么特别的东西可以防止它被改变. 但是,如果城市将销售税提高到9%,我们仍然可以通过设置`tax_rate`指定的值`零点零九`在一个地方,而不是发现许多出现的价值. `零点零八`散布在整个计划和更新所有. 

在撰写本文时,JavaScript的最新版本(俗称"6")包括新申报方式_常数_,利用`const`而不是`VaR`: 

```js
// as of ES6:
const TAX_RATE = 0.08;

var amount = 99.99;

// ..
```

常量和变量值一样有用,但常量也防止在初始设置之后意外地改变值. 如果您试图将任何不同的值分配给`tax_rate`在第一个声明之后,您的程序将拒绝更改(在严格模式下,出现错误)ℴℴ参见第2章中的"严格模式". 

顺便说一下,这种对错误的"保护"类似于静态类型强制执行,所以您可以看到为什么其他语言中的静态类型是有吸引力的!

**注: **有关变量在程序中如何使用不同值的更多信息,请参见_类型与语法_本系列的标题. 

## 阻碍

当你购买新手机时,电话商店员工必须通过一系列步骤来完成结账. 

类似地,在代码中我们经常需要将一系列语句组合在一起,我们通常称之为_块_. 在JavaScript中,一个块是通过在一个花括号对中包一个或多个语句来定义的. `{ ..}`. 考虑: 

```js
var amount = 99.99;

// a general block
{
	amount = amount * 2;
	console.log( amount );	// 199.98
}
```

这种独立的`{ ..}`通用块有效,但在js程序中并不常见. 通常,块被附加到一些其他控件语句,如`如果`声明(见"条件")或环(见"循环"). 例如:

```js
var amount = 99.99;

// is amount big enough?
if (amount > 10) {			// <-- block attached to `if`
	amount = amount * 2;
	console.log( amount );	// 199.98
}
```

我们会解释`如果`在下一节中的语句,但正如您所看到的,`{ ..}`它的两个语句块附在`如果(金额> 10)`;只有在有条件的情况下,才能处理区块内的语句. 

**注: **与大多数其他语句不同`控制台日志(数量);`块语句不需要分号(`;`)结束它. 

## 条件句

"你想在购买时加上额外的屏幕保护器吗?_状态_您的钱包或银行帐户回答这个问题. 但很明显,这只是一个简单的"是"或"不是"的问题. 

我们可以表达的方式有很多种. _条件句_(又名决策)在我们的节目中. 

最常见的是`如果`声明. 本质上,你是说,"_如果_这个条件是真的,做到以下几点ⅆ. 例如:

```js
var bank_balance = 302.13;
var amount = 99.99;

if (amount < bank_balance) {
	console.log( "I want to buy this phone!" );
}
```

这个`如果`语句需要在括号之间的表达式. `()`这可以被视为`真正的`或`假`. 在这个程序中,我们提供了表达式. `bank_balance量<`这将被评估为`真正的`或`假`取决于`bank_balance`变量. 

如果条件不正确,您甚至可以提供一个替代方案,称为`其他的`条款.考虑: 

```js
const ACCESSORY_PRICE = 9.99;

var bank_balance = 302.13;
var amount = 99.99;

amount = amount * 2;

// can we afford the extra purchase?
if ( amount < bank_balance ) {
	console.log( "I'll take the accessory!" );
	amount = amount + ACCESSORY_PRICE;
}
// otherwise:
else {
	console.log( "No, thanks." );
}
```

在这里,如果`bank_balance量<`是`真正的`我们打印出来`"我来拿这个饰品!"`并添加`九点九九`我们的`数量`变量. 否则,该`其他的`从句说我们只是礼貌地回应`"不,谢谢. "`离开`数量`不变. 

正如我们早先在"值和类型"中讨论的那样,那些不属于预期类型的值常常被强制为该类型. 这个`如果`声明预计`布尔`但是如果你传递了一些还没有的东西`布尔`胁迫会发生. 

JavaScript定义了一组特定的值被认为是"falsy"因为当强迫一个`布尔`,他们成为`假`-这些值包括`零`和`""`. 任何其他值不在"falsy"列表将自动"真相"--当强迫一个`布尔`他们成为`真正的`. 一些价值观包括`九十九点九九`和`"自由"`. 看到"真相与falsy"2章的更多信息. 

_条件句_除此之外还有其他形式`如果`. 例如,`转换`语句可以用作一系列的简写. `如果..否则`报表(见第2章). 循环(见"循环")使用_有条件的_确定循环是否应该继续或停止. 

**注: **有关可以在测试表达式隐发生强制更深层次的信息_条件句_见第4章_类型与语法_本系列的标题. 

## 环

在繁忙的时候,有一个等候名单,客户需要与电话商店雇员通话. 尽管名单上还有人,她只需要继续为下一个客户服务. 

重复一组动作直到某个条件失败ℴℴ换句话说,只在条件不变时重复ℴℴ是编程循环的工作;循环可以采取不同的形式,但它们都满足这一基本行为. 

循环包含测试条件和块(通常为`{ ..}`). 每次循环块执行时,都称为_迭代_. 

例如,`虽然`环和`而做..`循环表单说明了重复一个语句块的概念,直到条件不再求值为止. `真正的`: 

```js
while (numOfCustomers > 0) {
	console.log( "How may I help you?" );

	// help the customer...

	numOfCustomers = numOfCustomers - 1;
}

// versus:

do {
	console.log( "How may I help you?" );

	// help the customer...

	numOfCustomers = numOfCustomers - 1;
} while (numOfCustomers > 0);
```

这些循环之间唯一的实际区别是在第一次迭代之前是否测试了条件(`虽然`或者在第一次迭代之后(`而做..`). 

在两种形式中,如果条件测试为`假`下一次迭代将不会运行. 这意味着如果条件是最初的. `假`,一个`虽然`循环永远不会运行,但`而做..`循环将第一次运行. 

有时候,为了计算某一组数字,你的循环是循环的,比如`零`到`九`(十个数字). 您可以通过设置循环迭代变量来实现这一点. `我`在价值`零`和递增的`一`每一次迭代. 

**警告: **由于各种历史原因,编程语言几乎总是以零为基础计算事物,这意味着从`零`而不是`一`. 如果你对这种思维方式不熟悉,一开始可能会很混乱. 花些时间练习数数`零`变得更舒适!

条件在每次迭代中都要测试,就像有一个隐含的一样. `如果`循环语句. 

我们可以使用javascript`打破`停止循环语句. 此外,我们可以观察到,创建一个循环是非常容易的. `打破`机理. 

让我们举例说明: 

```js
var i = 0;

// a `while..true` loop would run forever, right?
while (true) {
	// stop the loop?
	if ((i <= 9) === false) {
		break;
	}

	console.log( i );
	i = i + 1;
}
// 0 1 2 3 4 5 6 7 8 9
```

**警告: **这不一定是您想要用于循环的实际形式. 这只是为了说明的目的. 

而`虽然`(或`而做..`)可以手动完成任务,还有另一种语法形式,称为`对于`循环就是为了这个目的: 

```js
for (var i = 0; i <= 9; i = i + 1) {
	console.log( i );
}
// 0 1 2 3 4 5 6 7 8 9
```

正如您所看到的,在这两种情况下都有条件`我< = 9`是`真正的`前10次迭代(`我`价值观`零`通过`九`两种循环形式,但变成`假`一旦`我`是价值`十`. 

这个`对于`循环有三个子句: 初始化子句(`var I=0`)条件测试子句(`我< = 9`)和更新子句(`i = i + 1`). 因此,如果要用循环迭代进行计数,`对于`是一种更紧凑ㄡ更容易理解和书写的形式. 

还有其他专门的循环形式,用于迭代特定的值,如对象的属性(参见第2章). 

## 功能

电话商店的雇员可能不会随身携带计算器来计算税金和最终购买金额. 这是她需要定义并反复重复使用的任务. 赔率是,公司有一个结帐登记册(电脑,平板电脑等),内置的那些"功能". 

同样的,你的程序将几乎肯定要分手的代码的任务分为可重用的部分,而不是重复重复重复(双关语!)这样做的方法是定义一个`功能`. 

函数通常是一个命名的代码段,可以通过名称"调用",并且每次都将在其内部运行代码. 考虑: 

```js
function printAmount() {
	console.log( amount.toFixed( 2 ) );
}

var amount = 99.99;

printAmount(); // "99.99"

amount = amount * 2;

printAmount(); // "199.98"
```

函数可以选择参数(又名参数)ℴℴ传入的值. 它们还可以返回一个值. 

```js
function printAmount(amt) {
	console.log( amt.toFixed( 2 ) );
}

function formatAmount() {
	return "$" + amount.toFixed( 2 );
}

var amount = 99.99;

printAmount( amount * 2 );		// "199.98"

amount = formatAmount();
console.log( amount );			// "$99.99"
```

功能`printamount(..)`获取一个参数,我们称之为`AMT`. 功能`formatamount()`返回一个值. 当然,您也可以将这两种技术结合在同一个函数中. 

函数通常用于您计划多次调用的代码,但它们也可以用于将相关代码部分组织到指定的集合中,即使您只计划调用它们一次. 

考虑: 

```js
const TAX_RATE = 0.08;

function calculateFinalPurchaseAmount(amt) {
	// calculate the new amount with the tax
	amt = amt + (amt * TAX_RATE);

	// return the new amount
	return amt;
}

var amount = 99.99;

amount = calculateFinalPurchaseAmount( amount );

console.log( amount.toFixed( 2 ) );		// "107.99"
```

虽然`calculatefinalpurchaseamount(..)`只调用一次,将其行为组织到一个单独的命名函数中,使使用其逻辑的代码(`金额= calculatefinalⅆ`语句)清洁工. 如果这个函数有更多的语句,它的好处就更明显了. 

### 范围

如果你要求电话商店的雇员买一个她的商店不带的手机型号,她就不能卖给你你要的电话. 她只能在商店的库存中使用手机. 你得去另一家商店看看是否能找到你要找的电话. 

编程对这个概念有一个术语: _范围_(技术上称为_词法范围_). 在JavaScript中,每个函数都有自己的作用域. 范围基本上是一个变量集合,以及这些变量如何通过名称访问的规则. 只有该函数内的代码才能访问该函数_作用域_变量.

变量名称在同一个范围内必须是唯一的--不能有两个不同的`一`坐在一起的变量. 但相同的变量名`一`可以出现在不同的范围. 

```js
function one() {
	// this `a` only belongs to the `one()` function
	var a = 1;
	console.log( a );
}

function two() {
	// this `a` only belongs to the `two()` function
	var a = 2;
	console.log( a );
}

one();		// 1
two();		// 2
```

另外,一个范围可以嵌套在另一个范围内,就像一个生日派对上的小丑在另一个气球里炸出一个气球一样. 如果一个范围嵌套在另一个范围内,最内部范围内的代码就可以从两个范围访问变量. 

考虑: 

```js
function outer() {
	var a = 1;

	function inner() {
		var b = 2;

		// we can access both `a` and `b` here
		console.log( a + b );	// 3
	}

	inner();

	// we can only access `a` here
	console.log( a );			// 1
}

outer();
```

词法范围规则表示,在一个范围内的代码可以访问该范围之外的变量或范围以外的任何范围. 

所以里面的代码`inner()`函数对这两个变量都有访问权. `一`和`B`但是代码在`outer()`只能访问`一`-它不能访问`B`因为那个变量只在里面`inner()`. 

从早期回忆起这个代码片段: 

```js
const TAX_RATE = 0.08;

function calculateFinalPurchaseAmount(amt) {
	// calculate the new amount with the tax
	amt = amt + (amt * TAX_RATE);

	// return the new amount
	return amt;
}
```

这个`tax_rate`常数(变量)可以从内部访问. `calculatefinalpurchaseamount(..)`函数,尽管我们没有传递它,因为词法范围. 

**注: **有关词法作用域的更多信息,请参见前三章_范围和关闭_本系列的标题. 

## 实践

学习编程绝对不能替代实践. 在我身上,没有多少清晰的文字能让你成为程序员. 

考虑到这一点,让我们来练习一下本章中所学到的一些概念. 我会给出"需求",你先试试. 然后查阅下面的代码,看看我是如何接近它的. 

-   写一个程序来计算你购买手机的总价格. 你将继续购买手机(提示: 循环!)直到你的银行账户里的钱用完了. 只要你的购买量低于你的心理消费门槛,你也可以为每个手机购买配件. 
-   在你计算了你的购买量后,加上税,然后打印出计算出的购买量,格式正确. 
-   最后,核对一下你的银行账户余额,看看你是否能负担得起. 
-   你应该为"税率"ㄡ"电话价格"ㄡ"配件价格"和"消费门槛"设置一些常数,并为你的"银行账户余额"设置一个变量. 
-   你应该定义函数来计算税收,并用"$"和舍入到小数点后两位来格式化价格. 
-   **奖金挑战: **试着把输入并入这个程序中,也许用`提示(ⅆ)`早期的"输入". 例如,您可以提示用户查询其银行帐户余额. 玩得开心,有创意!

好,继续吧. 试试. 不要偷看我的代码列表,直到你自己给它一个镜头!

**注: **因为这是一本JavaScript书,所以我显然要用JavaScript解决实践练习. 但如果你觉得舒服的话,现在可以用另一种语言. 

下面是这个练习的JavaScript解决方案: 

```js
const SPENDING_THRESHOLD = 200;
const TAX_RATE = 0.08;
const PHONE_PRICE = 99.99;
const ACCESSORY_PRICE = 9.99;

var bank_balance = 303.91;
var amount = 0;

function calculateTax(amount) {
	return amount * TAX_RATE;
}

function formatAmount(amount) {
	return "$" + amount.toFixed( 2 );
}

// keep buying phones while you still have money
while (amount < bank_balance) {
	// buy a new phone!
	amount = amount + PHONE_PRICE;

	// can we afford the accessory?
	if (amount < SPENDING_THRESHOLD) {
		amount = amount + ACCESSORY_PRICE;
	}
}

// don't forget to pay the government, too
amount = amount + calculateTax( amount );

console.log(
	"Your purchase: " + formatAmount( amount )
);
// Your purchase: $334.76

// can you actually afford this purchase?
if (amount > bank_balance) {
	console.log(
		"You can't afford this purchase. :("
	);
}
// You can't afford this purchase. :(
```

**注: **运行这个JavaScript程序最简单的方法是将它键入T. 

你好吗?既然你看到了我的代码,再试一次也没什么不好的. 并围绕改变一些常量来观察程序如何以不同的值运行. 

## 回顾

学习编程并不一定是一个复杂而势不可挡的过程. 有几个基本概念你需要包装你的头周围. 

这些行为就像积木. 为了建造一座高塔,你首先首先把块放在块上面的块上. 程序设计也是如此. 下面是一些基本的编程构造块: 

-   你需要_运营商_在值上执行操作. 
-   你需要价值观和_类型_执行不同的动作,比如数学`数`s或输出`一串`S.
-   你需要_变量_存储数据(又名_状态_在程序执行期间. 
-   你需要_条件句_喜欢`如果`作出决定的陈述. 
-   你需要_环_重复任务直到一个条件停止. 
-   你需要_功能_将代码组织成逻辑的和可重用的块. 

代码注释是编写更易读代码的一种有效方法,如果有问题,代码将使您的程序更易于理解ㄡ维护和修复. 

最后,不要忽视实践的力量. 学习如何编写代码最好的方法是编写代码. 

我很兴奋你现在已经开始学习如何编码了!坚持下去.别忘了查看其他初学者编程资源(书籍ㄡ博客ㄡ在线培训等). 本章和这本书是一个伟大的开端,但它们只是一个简短的介绍. 

下一章将回顾本章中的许多概念,但从更具体的JavaScript角度来看,这将突出说明在本系列其余部分中更深入地讨论的大部分主要主题. 
