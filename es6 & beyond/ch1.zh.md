
# 你不知道JS: ES6与超越

# 第1章: ES?现在与未来

在你深入钻研这本书之前,你应该对JavaScript有一个扎实的工作能力,达到最新的标准(在撰写本文的时候)ㄢ_ES5_(技术上ES 5.1)ㄢ在这里,我们计划直接谈论即将到来的事情ㄢ_6_以及将我们的愿景抛在后面,以了解JS将如何向前发展ㄢ

如果您仍然在用JavaScript寻找信心,我强烈建议您先阅读本系列中的其他标题: 

-   _起来,去_你是新编程和JS的吗?这是你开始学习旅程时需要参考的路线图ㄢ
-   _范围和关闭_你知道js词法范围是基于编译器(不是解释器!)语义?你能解释闭包是词法范围和函数作为值的直接结果吗?
-   _对象原型_你能背诵四个简单的规则吗?`这`绑定?你有没有蒙混过关假"类ℽ在JS采用简单的"行为代表团ℽ的设计模式?听说过_与其他对象链接的对象_(oloo)?
-   _类型与语法_您知道js中的内置类型,更重要的是,您知道如何正确安全地使用类型之间的强制吗?你对JS语法/语法的细微差别有多舒服?
-   _异步和性能_: 你还在使用回调函数来管理你的不同步?你能解释一下什么是承诺,为什么/怎么解决"回调地狱ℽ?你知道如何使用发电机来提高异步代码的易读性?究竟是什么构成JS程序和单个操作的成熟优化?

如果您已经阅读了所有这些标题,并且对它们所涵盖的主题感到非常满意,那么我们应该深入探讨JS的演变过程,以探索不仅仅是很快,而是更远的地平线上的所有变化ㄢ

不像ES5,ES6不仅仅是温和的一套新的API添加到语言ㄢ它包含了一系列新的语法形式,其中一些可能需要相当多的时间来适应ㄢ还有各种新的组织形式和各种数据类型的新API帮助器ㄢ

ES6语言激进的跳了ㄢ即使你认为你知道JS ES5,ES6充满新的东西你_还不知道_所以准备好!这本书探讨的主题ES6你需要加快速度,甚至给你一窥未来特征下的轨道,你应该知道的ㄢ

**警告: **在这本书中的所有代码假定一个6 +环境ㄢ在写这篇文章时,6支持有很大不同,在浏览器和JS的环境(如节点ㄢJS),所以你可以选择不同的ㄢ

## 版本控制

JavaScript标准被正式"ECMAScriptℽ(简称ES),直到最近才被完全版本用序数(即"5ℽ为"第五版ℽ)ㄢ

最早的版本,ES1和ES2,未被广泛认识和实施ㄢ三是JavaScript的最普遍的基线,并构成了JavaScript标准的浏览器如IE6-8和旧的Android 2 X手机浏览器ㄢ因为政治原因超出了我们将在这里,命运多舛的沙四段从未ㄢ

2009ㄡES5正式敲定(后来es5.1 2011),和作为现代革命爆浏览器js的普遍标准解决,如Firefox,Chrome,Opera,Safari,和许多其他ㄢ

达到预期的_下一个_JS版(从2013降至2014和2015),明显与普通标签的话语已经6ㄢ

然而,到6规范的时间表,建议已经浮出水面,版本可能会在未来一年的开关模式,如es2016(又名ES7)指任何规格的版本是在2016年底前完成ㄢ有些不以为然,但6将可能保持在后期改变替代es2015优势明显ㄢ然而,es2016实际上可能信号基础架构新的一年ㄢ

也有人注意到JS进化的速度甚至比一年的版本更快ㄢ一旦一个想法在标准讨论中开始发展,浏览器就开始对该特性进行原型化,早期的用户开始尝试代码ㄢ

通常情况下,在正式批准之前,由于早期的发动机/工装原型,一个特性实际上是标准化的ㄢ因此,考虑JS版本的未来是每一个特性,而不是每一个主要特性的集合(如现在),甚至每年(可能会成为),也是有效的ㄢ

外卖的版本标签不再重要,JavaScript开始被视为一个常青树,生活标准ㄢ为了应对这一最好的方式是停止思考你的代码为"6为主,"比如,而是考虑功能功能支持ㄢ

## transpiling

由于功能的快速发展,使得JS开发人员马上就要解决这个问题ㄢ

路ES5似乎发挥了更广泛的行业,典型的心态是,代码库等采用ES5直到大多数如果不是所有的pre-es5环境已经下降了他们的支持,谱ㄢ因此,许多人只是在最近(在撰写本文时)开始采用类似的方法ㄢ`严格的`模式,这在五年前降落在ES5ㄢ

人们普遍认为,JS生态系统的未来是一种有害的方法,它会等待并跟踪规范这么多年ㄢ所有负责开发语言的人都希望开发人员在规范和浏览器稳定下来后,就可以开始在新的特性和模式上建立代码,这样就有机会实现这些功能和模式ㄢ

那么我们如何解决这种表面上的矛盾呢?答案是工具,特别是所谓的技术ㄢ_transpiling_(转换+编译)ㄢ粗略地说,这个想法是使用一个特殊的工具来改变你的6码为等效(或接近!)比赛在ES5的环境工作ㄢ

例如,考虑速记属性定义(参见第2章中的"对象文字扩展ℽ)ㄢ这里的6形式: 

```js
var foo = [1,2,3];

var obj = {
	foo		// means `foo: foo`
};

obj.foo;	// [1,2,3]
```

但(大致)下面是transpiles: 

```js
var foo = [1,2,3];

var obj = {
	foo: foo
};

obj.foo;	// [1,2,3]
```

这是一个小而愉快的转变,让我们缩短`Foo Foo: `在对象文字声明中`Foo`如果名字是一样的ㄢ

transpilers执行这些转换的你,通常在构建工作流步骤类似于你如何进行脱毛,缩小,和其他类似的工作ㄢ

### 垫片/ polyfills

不是所有的新功能,需要一个transpiler ES6ㄢpolyfills(又名垫片)是一种模式定义等价的行为从一个较新的环境到一个大的环境,如果可能的话ㄢ语法不能polyfilled API,但往往可以ㄢ

例如,`对象是(ⅆ)`是一个检查两个值的严格相等的新工具,但没有细微的例外ㄢ`= = =`有`南`和`- 0`价值观ㄢ的polyfill为`对象是(ⅆ)`相当容易: 

```js
if (!Object.is) {
	Object.is = function(v1, v2) {
		// test for `-0`
		if (v1 === 0 && v2 === 0) {
			return 1 / v1 === 1 / v2;
		}
		// test for `NaN`
		if (v1 !== v1) {
			return v2 !== v2;
		}
		// everything else
		return v1 === v2;
	};
}
```

**提示: **注意外面`如果`声明中后卫缠polyfillㄢ这是一个重要的细节,这意味着代码段只定义了对旧环境的回退行为,而旧环境中所讨论的API还没有定义;您希望覆盖现有API是非常罕见的ㄢ

有一个伟大的集合称为"6 6垫片垫片ℽ(<https://github.com/paulmillr/es6-shim/>)您一定要作为任何新JS项目的标准部分采用!

假定js将不断地不断演进,浏览器不断地对功能进行支持,而不是大块地支持ㄢ所以保持它的发展更新,最好的策略是只介绍polyfill垫片插入到你的代码库,和一个transpiler进入你建立工作流,现在和适应新的现实ㄢ

如果你决定保持现状,在没有使用功能支持的浏览器上等待,然后再开始使用功能,你总是会落后的ㄢ不幸的是,您将错过所有旨在使JavaScript更高效ㄡ高效ㄡ健壮的创新ㄢ

## 回顾

6(有些人可能试图把它es2015)刚刚登陆为写这篇文章的时候,有许多新的事情你需要知道!

但是更重要的是改变你的思维方式,使之与JavaScript发展的新方式保持一致ㄢ正如许多人过去所做的,它不仅仅是等待几年的官方文件获得批准ㄢ

现在,JavaScript在浏览器准备就绪后就登陆了,这取决于你是否会提前上火车,或者你是否会从现在开始玩昂贵的赶超游戏ㄢ

无论未来JavaScript采用什么标签,它都会比以前更快地移动ㄢtranspilers和垫片/ polyfills是重要的工具,让你在最前沿,语言是领导ㄢ

如果对JavaScript的新现实有任何重要的理解,那就是所有js开发人员都强烈要求从曲线的后缘移动到前沿ㄢ学习就是一切的开始6!
